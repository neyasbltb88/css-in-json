{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/js/css-in-json.js","app/js/modules/extend.js"],"names":[],"mappings":"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","file":"../css-in-json.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import Extend from './modules/extend';\r\n\r\n// TODO: При генерации scoped стилей сделать определение нескольких селекторов,\r\n// записанных через запятую, и вставлять перед каждый атрибут scoped\r\n\r\nclass CSSinJSON {\r\n    constructor(options) {\r\n        this.elem_selector = options.elem; // Селектор элемента\r\n        this.elem = document.querySelector(options.elem); // Сам элемент\r\n        this.style_obj = options.style; // Объект стилей\r\n        this.scoped = options.scoped; // Флаг изоляции стилей\r\n\r\n        this.Extend = Extend; // Плагин объединения объектов\r\n\r\n        this.scopedId = ''; // Здесь будет сгенерированный id для изоляции стилей\r\n        this.style_string = ''; // Здесь будут сгенерированные стили в виде строки\r\n\r\n\r\n        // Точка входа\r\n        this.init();\r\n    }\r\n\r\n    // Генератор рандомного числа\r\n    rand(min, max) {\r\n        let rand = Math.floor(min + Math.random() * (max + 1 - min));\r\n        return rand;\r\n    }\r\n\r\n    // Генератор id для изоляции в диапазоне символов a-z\r\n    scopedIdGenerate() {\r\n        let id = '';\r\n        for (let i = 0; i < 10; i++) {\r\n            id += String.fromCharCode(this.rand(97, 122));\r\n        }\r\n\r\n        return id;\r\n    }\r\n\r\n    // TODO: разобраться с этим методом\r\n    // Метод расширения стилей, пока работает не правильно\r\n    extend(obj1, obj2) {\r\n        this.style_obj = this.Extend(obj1, obj2);\r\n        this.style_string = this.jsonToStyle(this.style_obj, this.scopedId);\r\n        this.updateStyleInject(this.style_string, this.scopedId);\r\n\r\n        return this.style_string;\r\n    }\r\n\r\n    // Вставка новых стилей в готовый элемент style\r\n    updateStyleInject(style_content, scoped) {\r\n        let stl = document.querySelector(`#${scoped}`);\r\n        stl.textContent = style_content;\r\n    }\r\n\r\n    // Создание нового элемента style и заполнение его атрибутами и стилями\r\n    styleInject(style_content, elem, class_name, scoped) {\r\n        let stl = document.createElement('style');\r\n        stl.id = scoped;\r\n        stl.className = class_name;\r\n        stl.textContent = style_content;\r\n        elem.appendChild(stl);\r\n    }\r\n\r\n    // Генерирует строковые стили для одного селектора\r\n    objToStyle(selector, obj, scoped) {\r\n        let scoped_selector = (scoped !== '') ? `[data-scoped=${scoped}]` : '';\r\n        let style = '';\r\n        for (let prop in obj) {\r\n            style += `\\n    ${prop}: ${obj[prop]};`\r\n        }\r\n\r\n        if (selector === this.elem_selector) {\r\n            return `${selector}${scoped_selector} {${style}\\n}`\r\n        }\r\n\r\n        return `${scoped_selector} ${selector} {${style}\\n}`\r\n    }\r\n\r\n    // Генерирует полные стили по входящему объекту\r\n    jsonToStyle(json, scoped = '') {\r\n        let style = '';\r\n        for (let selector in json) {\r\n            style += this.objToStyle(selector, json[selector], scoped) + '\\n\\n';\r\n        }\r\n\r\n        return style;\r\n    }\r\n\r\n\r\n    init() {\r\n        // Если нужно, сгенерировать id для изоляции стилей\r\n        if (this.scoped) {\r\n            this.scopedId = this.scopedIdGenerate();\r\n            this.elem.dataset.scoped = this.scopedId;\r\n        }\r\n\r\n        // Сгенерировать строку стилей из полученного объекта\r\n        this.style_string = this.jsonToStyle(this.style_obj, this.scopedId);\r\n\r\n        // Вставить сгенерированные стили на страницу\r\n        this.styleInject(this.style_string, document.head, 'CSSinJSON_style', this.scopedId);\r\n    }\r\n}\r\n\r\nwindow.CSSinJSON = CSSinJSON;","/*Функция из jQuery для объединения объектов\r\n * var newObj = extend(obj_1, obj_2);\r\n *\r\n * Для рекурсивного объединения\r\n * var newObj = extend(true, obj_1, obj_2);\r\n *\r\n * Работа функции изменяет первый объект obj_1\r\n * newObj === obj_1\r\n */\r\n\r\n\r\nexport default function extend() {\r\n    var options, name, src, copy, copyIsArray, clone,\r\n        target = arguments[0] || {},\r\n        i = 1,\r\n        length = arguments.length,\r\n        deep = false;\r\n    // Handle a deep copy situation\r\n    if (typeof target === \"boolean\") {\r\n        deep = target;\r\n        // Skip the boolean and the target\r\n        target = arguments[i] || {};\r\n        i++;\r\n    }\r\n    // Handle case when target is a string or something (possible in deep copy)\r\n    if (typeof target !== \"object\" && !isFunction(target)) {\r\n        target = {};\r\n    }\r\n    // Extend jQuery itself if only one argument is passed\r\n    if (i === length) {\r\n        target = this;\r\n        i--;\r\n    }\r\n    for (; i < length; i++) {\r\n        // Only deal with non-null/undefined values\r\n        if ((options = arguments[i]) != null) {\r\n            // Extend the base object\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n                // Prevent never-ending loop\r\n                if (target === copy) {\r\n                    continue;\r\n                }\r\n                // Recurse if we're merging plain objects or arrays\r\n                if (deep && copy && (isPlainObject(copy) ||\r\n                        (copyIsArray = Array.isArray(copy)))) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && Array.isArray(src) ? src : [];\r\n                    } else {\r\n                        clone = src && isPlainObject(src) ? src : {};\r\n                    }\r\n                    // Never move original objects, clone them\r\n                    target[name] = extend(deep, clone, copy);\r\n                    // Don't bring in undefined values\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function isPlainObject(obj) {\r\n        var proto, Ctor;\r\n        // Detect obvious negatives\r\n        // Use toString instead of jQuery.type to catch host objects\r\n        if (!obj || toString.call(obj) !== \"[object Object]\") {\r\n            return false;\r\n        }\r\n        proto = getProto(obj);\r\n        // Objects with no prototype (e.g., `Object.create( null )`) are plain\r\n        if (!proto) {\r\n            return true;\r\n        }\r\n        // Objects with prototype are plain iff they were constructed by a global Object function\r\n        Ctor = hasOwn.call(proto, \"constructor\") && proto.constructor;\r\n        return typeof Ctor === \"function\" && fnToString.call(Ctor) === ObjectFunctionString;\r\n\r\n        function getProto(obj) {\r\n            obj = obj || {};\r\n            return obj.getPrototypeOf;\r\n        }\r\n\r\n        function class2type() {\r\n            return {};\r\n        }\r\n\r\n        function hasOwn(class2type) {\r\n            return class2type.hasOwnProperty;\r\n        }\r\n\r\n        function fnToString(hasOwn) {\r\n            return hasOwn.toString;\r\n        }\r\n    }\r\n\r\n    // Return the modified object\r\n    return target;\r\n};"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvanMvY3NzLWluLWpzb24uanMiLCJhcHAvanMvbW9kdWxlcy9leHRlbmQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7Ozs7Ozs7O0FBRUE7QUFDQTtJQUVNLFM7OztBQUNGLHFCQUFZLE9BQVosRUFBcUI7QUFBQTs7QUFDakIsU0FBSyxhQUFMLEdBQXFCLE9BQU8sQ0FBQyxJQUE3QixDQURpQixDQUNrQjs7QUFDbkMsU0FBSyxJQUFMLEdBQVksUUFBUSxDQUFDLGFBQVQsQ0FBdUIsT0FBTyxDQUFDLElBQS9CLENBQVosQ0FGaUIsQ0FFaUM7O0FBQ2xELFNBQUssU0FBTCxHQUFpQixPQUFPLENBQUMsS0FBekIsQ0FIaUIsQ0FHZTs7QUFDaEMsU0FBSyxNQUFMLEdBQWMsT0FBTyxDQUFDLE1BQXRCLENBSmlCLENBSWE7O0FBRTlCLFNBQUssTUFBTCxHQUFjLGVBQWQsQ0FOaUIsQ0FNSzs7QUFFdEIsU0FBSyxRQUFMLEdBQWdCLEVBQWhCLENBUmlCLENBUUc7O0FBQ3BCLFNBQUssWUFBTCxHQUFvQixFQUFwQixDQVRpQixDQVNPO0FBR3hCOztBQUNBLFNBQUssSUFBTDtBQUNILEcsQ0FFRDs7Ozs7eUJBQ0ssRyxFQUFLLEcsRUFBSztBQUNYLFVBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFMLENBQVcsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFMLE1BQWlCLEdBQUcsR0FBRyxDQUFOLEdBQVUsR0FBM0IsQ0FBakIsQ0FBWDtBQUNBLGFBQU8sSUFBUDtBQUNILEssQ0FFRDs7Ozt1Q0FDbUI7QUFDZixVQUFJLEVBQUUsR0FBRyxFQUFUOztBQUNBLFdBQUssSUFBSSxDQUFDLEdBQUcsQ0FBYixFQUFnQixDQUFDLEdBQUcsRUFBcEIsRUFBd0IsQ0FBQyxFQUF6QixFQUE2QjtBQUN6QixRQUFBLEVBQUUsSUFBSSxNQUFNLENBQUMsWUFBUCxDQUFvQixLQUFL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Q25CLE1BQUEsR0FBRyxHQUFHLEdBQUcsSUFBSSxFQUFiO0FBQ0EsYUFBTyxHQUFHLENBQUMsY0FBWDtBQUNIOztBQUVELGFBQVMsVUFBVCxHQUFzQjtBQUNsQixhQUFPLEVBQVA7QUFDSDs7QUFFRCxhQUFTLE1BQVQsQ0FBZ0IsVUFBaEIsRUFBNEI7QUFDeEIsYUFBTyxVQUFVLENBQUMsY0FBbEI7QUFDSDs7QUFFRCxhQUFTLFVBQVQsQ0FBb0IsTUFBcEIsRUFBNEI7QUFDeEIsYUFBTyxNQUFNLENBQUMsUUFBZDtBQUNIO0FBQ0osR0FwRjRCLENBc0Y3Qjs7O0FBQ0EsU0FBTyxNQUFQO0FBQ0g7O0FBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgRXh0ZW5kIGZyb20gJy4vbW9kdWxlcy9leHRlbmQnO1xyXG5cclxuLy8gVE9ETzog0J/RgNC4INCz0LXQvdC10YDQsNGG0LjQuCBzY29wZWQg0YHRgtC40LvQtdC5INGB0LTQtdC70LDRgtGMINC+0L/RgNC10LTQtdC70LXQvdC40LUg0L3QtdGB0LrQvtC70YzQutC40YUg0YHQtdC70LXQutGC0L7RgNC+0LIsXHJcbi8vINC30LDQv9C40YHQsNC90L3Ri9GFINGH0LXRgNC10Lcg0LfQsNC/0Y/RgtGD0Y4sINC4INCy0YHRgtCw0LLQu9GP0YLRjCDQv9C10YDQtdC0INC60LDQttC00YvQuSDQsNGC0YDQuNCx0YPRgiBzY29wZWRcclxuXHJcbmNsYXNzIENTU2luSlNPTiB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtX3NlbGVjdG9yID0gb3B0aW9ucy5lbGVtOyAvLyDQodC10LvQtdC60YLQvtGAINGN0LvQtdC80LXQvdGC0LBcclxuICAgICAgICB0aGlzLmVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMuZWxlbSk7IC8vINCh0LDQvCDRjdC70LXQvNC10L3RglxyXG4gICAgICAgIHRoaXMuc3R5bGVfb2JqID0gb3B0aW9ucy5zdHlsZTsgLy8g0J7QsdGK0LXQutGCINGB0YLQuNC70LXQuVxyXG4gICAgICAgIHRoaXMuc2NvcGVkID0gb3B0aW9ucy5zY29wZWQ7IC8vINCk0LvQsNCzINC40LfQvtC70Y/RhtC40Lgg0YHRgtC40LvQtdC5XHJcblxyXG4gICAgICAgIHRoaXMuRXh0ZW5kID0gRXh0ZW5kOyAvLyDQn9C70LDQs9C40L0g0L7QsdGK0LXQtNC40L3QtdC90LjRjyDQvtCx0YrQtdC60YLQvtCyXHJcblxyXG4gICAgICAgIHRoaXMuc2NvcGVkSWQgPSAnJzsgLy8g0JfQtNC10YHRjCDQsdGD0LTQtdGCINGB0LPQtdC90LXRgNC40YDQvtCy0LDQvdC90YvQuSBpZCDQtNC70Y8g0LjQt9C+0LvRj9GG0LjQuCDRgdGC0LjQu9C10LlcclxuICAgICAgICB0aGlzLnN0eWxlX3N0cmluZyA9ICcnOyAvLyDQl9C00LXRgdGMINCx0YPQtNGD0YIg0YHQs9C10L3QtdGA0LjRgNC+0LLQsNC90L3Ri9C1INGB0YLQuNC70Lgg0LIg0LLQuNC00LUg0YHRgtGA0L7QutC4XHJcblxyXG5cclxuICAgICAgICAvLyDQotC+0YfQutCwINCy0YXQvtC00LBcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDQk9C10L3QtdGA0LDRgtC+0YAg0YDQsNC90LTQvtC80L3QvtCz0L4g0YfQuNGB0LvQsFxyXG4gICAgcmFuZChtaW4sIG1heCkge1xyXG4gICAgICAgIGxldCByYW5kID0gTWF0aC5mbG9vcihtaW4gKyBNYXRoLnJhbmRvbSgpICogKG1heCArIDEgLSBtaW4pKTtcclxuICAgICAgICByZXR1cm4gcmFuZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyDQk9C10L3QtdGA0LDRgtC+0YAgaWQg0LTQu9GPINC40LfQvtC70Y/RhtC40Lgg0LIg0LTQuNCw0L/QsNC30L7QvdC1INGB0LjQvNCy0L7Qu9C+0LIgYS16XHJcbiAgICBzY29wZWRJZEdlbmVyYXRlKCkge1xyXG4gICAgICAgIGxldCBpZCA9ICcnO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xyXG4gICAgICAgICAgICBpZCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXMucmFuZCg5NywgMTIyKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzog0YDQsNC30L7QsdGA0LDRgtGM0YHRjyDRgSDRjdGC0LjQvCDQvNC10YLQvtC00L7QvFxyXG4gICAgLy8g0JzQtdGC0L7QtCDRgNCw0YHRiNC40YDQtdC90LjRjyDRgdGC0LjQu9C10LksINC/0L7QutCwINGA0LDQsdC+0YLQsNC10YIg0L3QtSDQv9GA0LDQstC40LvRjNC90L5cclxuICAgIGV4dGVuZChvYmoxLCBvYmoyKSB7XHJcbiAgICAgICAgdGhpcy5zdHlsZV9vYmogPSB0aGlzLkV4dGVuZChvYmoxLCBvYmoyKTtcclxuICAgICAgICB0aGlzLnN0eWxlX3N0cmluZyA9IHRoaXMuanNvblRvU3R5bGUodGhpcy5zdHlsZV9vYmosIHRoaXMuc2NvcGVkSWQpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVJbmplY3QodGhpcy5zdHlsZV9zdHJpbmcsIHRoaXMuc2NvcGVkSWQpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZV9zdHJpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0JLRgdGC0LDQstC60LAg0L3QvtCy0YvRhSDRgdGC0LjQu9C10Lkg0LIg0LPQvtGC0L7QstGL0Lkg0Y3Qu9C10LzQtdC90YIgc3R5bGVcclxuICAgIHVwZGF0ZVN0eWxlSW5qZWN0KHN0eWxlX2NvbnRlbnQsIHNjb3BlZCkge1xyXG4gICAgICAgIGxldCBzdGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtzY29wZWR9YCk7XHJcbiAgICAgICAgc3RsLnRleHRDb250ZW50ID0gc3R5bGVfY29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICAvLyDQodC+0LfQtNCw0L3QuNC1INC90L7QstC+0LPQviDRjdC70LXQvNC10L3RgtCwIHN0eWxlINC4INC30LDQv9C+0LvQvdC10L3QuNC1INC10LPQviDQsNGC0YDQuNCx0YPRgtCw0LzQuCDQuCDRgdGC0LjQu9GP0LzQuFxyXG4gICAgc3R5bGVJbmplY3Qoc3R5bGVfY29udGVudCwgZWxlbSwgY2xhc3NfbmFtZSwgc2NvcGVkKSB7XHJcbiAgICAgICAgbGV0IHN0bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcbiAgICAgICAgc3RsLmlkID0gc2NvcGVkO1xyXG4gICAgICAgIHN0bC5jbGFzc05hbWUgPSBjbGFzc19uYW1lO1xyXG4gICAgICAgIHN0bC50ZXh0Q29udGVudCA9IHN0eWxlX2NvbnRlbnQ7XHJcbiAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChzdGwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCT0LXQvdC10YDQuNGA0YPQtdGCINGB0YLRgNC+0LrQvtCy0YvQtSDRgdGC0LjQu9C4INC00LvRjyDQvtC00L3QvtCz0L4g0YHQtdC70LXQutGC0L7RgNCwXHJcbiAgICBvYmpUb1N0eWxlKHNlbGVjdG9yLCBvYmosIHNjb3BlZCkge1xyXG4gICAgICAgIGxldCBzY29wZWRfc2VsZWN0b3IgPSAoc2NvcGVkICE9PSAnJykgPyBgW2RhdGEtc2NvcGVkPSR7c2NvcGVkfV1gIDogJyc7XHJcbiAgICAgICAgbGV0IHN0eWxlID0gJyc7XHJcbiAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBvYmopIHtcclxuICAgICAgICAgICAgc3R5bGUgKz0gYFxcbiAgICAke3Byb3B9OiAke29ialtwcm9wXX07YFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNlbGVjdG9yID09PSB0aGlzLmVsZW1fc2VsZWN0b3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGAke3NlbGVjdG9yfSR7c2NvcGVkX3NlbGVjdG9yfSB7JHtzdHlsZX1cXG59YFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGAke3Njb3BlZF9zZWxlY3Rvcn0gJHtzZWxlY3Rvcn0geyR7c3R5bGV9XFxufWBcclxuICAgIH1cclxuXHJcbiAgICAvLyDQk9C10L3QtdGA0LjRgNGD0LXRgiDQv9C+0LvQvdGL0LUg0YHRgtC40LvQuCDQv9C+INCy0YXQvtC00Y/RidC10LzRgyDQvtCx0YrQtdC60YLRg1xyXG4gICAganNvblRvU3R5bGUoanNvbiwgc2NvcGVkID0gJycpIHtcclxuICAgICAgICBsZXQgc3R5bGUgPSAnJztcclxuICAgICAgICBmb3IgKGxldCBzZWxlY3RvciBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgIHN0eWxlICs9IHRoaXMub2JqVG9TdHlsZShzZWxlY3RvciwganNvbltzZWxlY3Rvcl0sIHNjb3BlZCkgKyAnXFxuXFxuJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzdHlsZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICAvLyDQldGB0LvQuCDQvdGD0LbQvdC+LCDRgdCz0LXQvdC10YDQuNGA0L7QstCw0YLRjCBpZCDQtNC70Y8g0LjQt9C+0LvRj9GG0LjQuCDRgdGC0LjQu9C10LlcclxuICAgICAgICBpZiAodGhpcy5zY29wZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zY29wZWRJZCA9IHRoaXMuc2NvcGVkSWRHZW5lcmF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW0uZGF0YXNldC5zY29wZWQgPSB0aGlzLnNjb3BlZElkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g0KHQs9C10L3QtdGA0LjRgNC+0LLQsNGC0Ywg0YHRgtGA0L7QutGDINGB0YLQuNC70LXQuSDQuNC3INC/0L7Qu9GD0YfQtdC90L3QvtCz0L4g0L7QsdGK0LXQutGC0LBcclxuICAgICAgICB0aGlzLnN0eWxlX3N0cmluZyA9IHRoaXMuanNvblRvU3R5bGUodGhpcy5zdHlsZV9vYmosIHRoaXMuc2NvcGVkSWQpO1xyXG5cclxuICAgICAgICAvLyDQktGB0YLQsNCy0LjRgtGMINGB0LPQtdC90LXRgNC40YDQvtCy0LDQvdC90YvQtSDRgdGC0LjQu9C4INC90LAg0YHRgtGA0LDQvdC40YbRg1xyXG4gICAgICAgIHRoaXMuc3R5bGVJbmplY3QodGhpcy5zdHlsZV9zdHJpbmcsIGRvY3VtZW50LmhlYWQsICdDU1NpbkpTT05fc3R5bGUnLCB0aGlzLnNjb3BlZElkKTtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LkNTU2luSlNPTiA9IENTU2luSlNPTjsiLCIvKtCk0YPQvdC60YbQuNGPINC40LcgalF1ZXJ5INC00LvRjyDQvtCx0YrQtdC00LjQvdC10L3QuNGPINC+0LHRitC10LrRgtC+0LJcclxuICogdmFyIG5ld09iaiA9IGV4dGVuZChvYmpfMSwgb2JqXzIpO1xyXG4gKlxyXG4gKiDQlNC70Y8g0YDQtdC60YPRgNGB0LjQstC90L7Qs9C+INC+0LHRitC10LTQuNC90LXQvdC40Y9cclxuICogdmFyIG5ld09iaiA9IGV4dGVuZCh0cnVlLCBvYmpfMSwgb2JqXzIpO1xyXG4gKlxyXG4gKiDQoNCw0LHQvtGC0LAg0YTRg9C90LrRhtC40Lgg0LjQt9C80LXQvdGP0LXRgiDQv9C10YDQstGL0Lkg0L7QsdGK0LXQutGCIG9ial8xXHJcbiAqIG5ld09iaiA9PT0gb2JqXzFcclxuICovXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZXh0ZW5kKCkge1xyXG4gICAgdmFyIG9wdGlvbnMsIG5hbWUsIHNyYywgY29weSwgY29weUlzQXJyYXksIGNsb25lLFxyXG4gICAgICAgIHRhcmdldCA9IGFyZ3VtZW50c1swXSB8fCB7fSxcclxuICAgICAgICBpID0gMSxcclxuICAgICAgICBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxyXG4gICAgICAgIGRlZXAgPSBmYWxzZTtcclxuICAgIC8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb25cclxuICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgIGRlZXAgPSB0YXJnZXQ7XHJcbiAgICAgICAgLy8gU2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldFxyXG4gICAgICAgIHRhcmdldCA9IGFyZ3VtZW50c1tpXSB8fCB7fTtcclxuICAgICAgICBpKys7XHJcbiAgICB9XHJcbiAgICAvLyBIYW5kbGUgY2FzZSB3aGVuIHRhcmdldCBpcyBhIHN0cmluZyBvciBzb21ldGhpbmcgKHBvc3NpYmxlIGluIGRlZXAgY29weSlcclxuICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSBcIm9iamVjdFwiICYmICFpc0Z1bmN0aW9uKHRhcmdldCkpIHtcclxuICAgICAgICB0YXJnZXQgPSB7fTtcclxuICAgIH1cclxuICAgIC8vIEV4dGVuZCBqUXVlcnkgaXRzZWxmIGlmIG9ubHkgb25lIGFyZ3VtZW50IGlzIHBhc3NlZFxyXG4gICAgaWYgKGkgPT09IGxlbmd0aCkge1xyXG4gICAgICAgIHRhcmdldCA9IHRoaXM7XHJcbiAgICAgICAgaS0tO1xyXG4gICAgfVxyXG4gICAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcclxuICAgICAgICBpZiAoKG9wdGlvbnMgPSBhcmd1bWVudHNbaV0pICE9IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxyXG4gICAgICAgICAgICBmb3IgKG5hbWUgaW4gb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgc3JjID0gdGFyZ2V0W25hbWVdO1xyXG4gICAgICAgICAgICAgICAgY29weSA9IG9wdGlvbnNbbmFtZV07XHJcbiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wXHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ID09PSBjb3B5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXNcclxuICAgICAgICAgICAgICAgIGlmIChkZWVwICYmIGNvcHkgJiYgKGlzUGxhaW5PYmplY3QoY29weSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGNvcHlJc0FycmF5ID0gQXJyYXkuaXNBcnJheShjb3B5KSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvcHlJc0FycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlJc0FycmF5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lID0gc3JjICYmIEFycmF5LmlzQXJyYXkoc3JjKSA/IHNyYyA6IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lID0gc3JjICYmIGlzUGxhaW5PYmplY3Qoc3JjKSA/IHNyYyA6IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBOZXZlciBtb3ZlIG9yaWdpbmFsIG9iamVjdHMsIGNsb25lIHRoZW1cclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0gPSBleHRlbmQoZGVlcCwgY2xvbmUsIGNvcHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXNcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29weSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdID0gY29weTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xyXG4gICAgICAgIHZhciBwcm90bywgQ3RvcjtcclxuICAgICAgICAvLyBEZXRlY3Qgb2J2aW91cyBuZWdhdGl2ZXNcclxuICAgICAgICAvLyBVc2UgdG9TdHJpbmcgaW5zdGVhZCBvZiBqUXVlcnkudHlwZSB0byBjYXRjaCBob3N0IG9iamVjdHNcclxuICAgICAgICBpZiAoIW9iaiB8fCB0b1N0cmluZy5jYWxsKG9iaikgIT09IFwiW29iamVjdCBPYmplY3RdXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm90byA9IGdldFByb3RvKG9iaik7XHJcbiAgICAgICAgLy8gT2JqZWN0cyB3aXRoIG5vIHByb3RvdHlwZSAoZS5nLiwgYE9iamVjdC5jcmVhdGUoIG51bGwgKWApIGFyZSBwbGFpblxyXG4gICAgICAgIGlmICghcHJvdG8pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE9iamVjdHMgd2l0aCBwcm90b3R5cGUgYXJlIHBsYWluIGlmZiB0aGV5IHdlcmUgY29uc3RydWN0ZWQgYnkgYSBnbG9iYWwgT2JqZWN0IGZ1bmN0aW9uXHJcbiAgICAgICAgQ3RvciA9IGhhc093bi5jYWxsKHByb3RvLCBcImNvbnN0cnVjdG9yXCIpICYmIHByb3RvLmNvbnN0cnVjdG9yO1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgQ3RvciA9PT0gXCJmdW5jdGlvblwiICYmIGZuVG9TdHJpbmcuY2FsbChDdG9yKSA9PT0gT2JqZWN0RnVuY3Rpb25TdHJpbmc7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFByb3RvKG9iaikge1xyXG4gICAgICAgICAgICBvYmogPSBvYmogfHwge307XHJcbiAgICAgICAgICAgIHJldHVybiBvYmouZ2V0UHJvdG90eXBlT2Y7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjbGFzczJ0eXBlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBoYXNPd24oY2xhc3MydHlwZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2xhc3MydHlwZS5oYXNPd25Qcm9wZXJ0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZuVG9TdHJpbmcoaGFzT3duKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoYXNPd24udG9TdHJpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG59OyJdfQ=="}